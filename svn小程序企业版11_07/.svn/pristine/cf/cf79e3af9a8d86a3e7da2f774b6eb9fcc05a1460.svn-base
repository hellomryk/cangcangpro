// pages/jindu/jindu.js
var _this = null;
var timer1,timer2
Page({

  /**
   * 页面的初始数据
   */
  data: {
    loadnum:0,//显示百分比
    phototext:'',//显示文字
  },

  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    _this = this;
    var num = 0;
   
    timer1 = setInterval(function() { 
      if (num < 100) {
        num++;
        var loadnum = num;
        _this.setData({
          loadnum: loadnum
        })
        if (num == 5) {
          timer2 =  setInterval(function() {
              if(num < 25) {
                num++;
                var loadnum = num;
                _this.setData({
                  loadnum: loadnum
                })
              } else {
                clearInterval(timer2)
              }
            },100)
        }
        if (num == 35) {
          timer2 = setInterval(function () {
            if (num < 47) {
              num++;
              var loadnum = num;
              _this.setData({
                loadnum: loadnum
              })
            } else {
              clearInterval(timer2)
            }
          }, 150)
        }
        if (num == 55) {
          timer2 = setInterval(function () {
            if (num < 65) {
              num++;
              var loadnum = num;
              _this.setData({
                loadnum: loadnum
              })
            } else {
              clearInterval(timer2)
            }
          }, 150)
        }
        if (num == 77) {
          timer2 = setInterval(function () {
            if (num < 92) {
              num++;
              var loadnum = num;
              _this.setData({
                loadnum: loadnum
              })
            } else {
              clearInterval(timer2)
            }
          }, 100)
        }
        if (num >= 0 && num < 15) {
          _this.setData({
            phototext:'努力准备中，即将开始...'
          })
        } else if(num < 54) {
            _this.setData({
              phototext: '正常上传...'
            })
        } else if (num < 78) {
          _this.setData({
            phototext: '正在测量...'
          })
        } else if (num < 99) {
          _this.setData({
            phototext: '数据分析中...'
          })
        } else if (num >= 99) {
          _this.setData({
            phototext: '处理完毕，请选择症状。'
          })
          setTimeout(function() {
            wx.navigateTo({
              url:'/pages/znpz2/znpz2'
            })
          },2000)
        }
      } else {
        clearInterval(timer1)
      }
      console.log(num)
    },1000*Math.random())
  },

  /**
   * 生命周期函数--监听页面初次渲染完成
   */
  onReady: function () {

  },

  /**
   * 生命周期函数--监听页面显示
   */
  onShow: function () {

  },

  /**
   * 生命周期函数--监听页面隐藏
   */
  onHide: function () {

  },

  /**
   * 生命周期函数--监听页面卸载
   */
  onUnload: function () {

  },

  /**
   * 页面相关事件处理函数--监听用户下拉动作
   */
  onPullDownRefresh: function () {

  },

  /**
   * 页面上拉触底事件的处理函数
   */
  onReachBottom: function () {

  },

  /**
   * 用户点击右上角分享
   */
  onShareAppMessage: function () {

  }
})